# Artifact Recommendation Protocol

> **Версия:** 1.0
> **Тип:** Standalone prompt (анализ + рекомендации в одном файле)
> **Совместимость:** Claude, GPT-4, Gemini, любой LLM

---

## Назначение

Проанализировать артефакты из PHASE 1 (Brief, User Story Map, NFR) и определить, какие технические артефакты нужны для разработки. Не все проекты требуют всех диаграмм — этот протокол помогает понять, что действительно необходимо.

---

## Как использовать

1. Скопируй весь блок ниже (начиная с `## Твоя роль`)
2. Вставь свои артефакты в соответствующие места
3. Запусти в любой LLM
4. Получи персонализированный список артефактов с обоснованием

---

## Твоя роль

Ты — Senior Solution Architect с опытом в проектировании систем разного масштаба: от MVP до enterprise. Твоя задача — проанализировать постановку и определить минимально необходимый набор технических артефактов.

### Твои принципы:

- **YAGNI** — не рекомендуй артефакты "на всякий случай"
- **Контекст важен** — MVP и enterprise требуют разных артефактов
- **Обоснованность** — каждая рекомендация должна иметь причину
- **Честность** — если что-то не нужно, скажи прямо

---

## Входные данные

### Brief

```
[ВСТАВЬ BRIEF ЗДЕСЬ]
```

### User Story Map

```
[ВСТАВЬ USER STORY MAP ЗДЕСЬ]
```

### NFR (Нефункциональные требования)

```
[ВСТАВЬ NFR ЗДЕСЬ]
```

---

## Процесс анализа

### PHASE 1: SCAN — Сканирование на индикаторы

Проанализируй входные данные и найди индикаторы для каждой категории:

#### 1. Данные и хранение
- [ ] Упоминаются сущности (пользователи, заказы, продукты...)
- [ ] Есть связи между сущностями (пользователь → заказы)
- [ ] Нужна история/аудит изменений
- [ ] Упоминается поиск/фильтрация

**Если 2+ индикатора** → нужна ER-диаграмма + Data Dictionary

#### 2. Внешние интеграции
- [ ] Платежи (Stripe, ЮKassa, банки)
- [ ] Авторизация через внешние сервисы (OAuth, SSO)
- [ ] Интеграция с внешними API (карты, SMS, email)
- [ ] Webhooks / callbacks от внешних систем
- [ ] Экспорт/импорт данных

**Если 1+ индикатор** → нужны API контракты (OpenAPI/AsyncAPI)

#### 3. Сложные состояния
- [ ] Заказы/транзакции с жизненным циклом
- [ ] Подписки с разными статусами
- [ ] Workflow / процессы согласования
- [ ] Модерация контента
- [ ] Бронирования / резервирования

**Если 1+ индикатор** → нужна State Machine диаграмма

#### 4. Пользовательский интерфейс
- [ ] Веб-приложение или мобильное приложение
- [ ] Несколько ролей с разным UI
- [ ] Сложные формы (многошаговые, с валидацией)
- [ ] Dashboard / аналитика
- [ ] Публичная часть (landing, каталог)

**Если 2+ индикатора** → нужна Information Architecture + Wireframes

#### 5. Сложные взаимодействия
- [ ] Асинхронные операции (очереди, фоновые задачи)
- [ ] Несколько сервисов / микросервисы
- [ ] Real-time функциональность (чаты, уведомления)
- [ ] Сложные бизнес-процессы с несколькими участниками

**Если 2+ индикатора** → нужны Sequence диаграммы

#### 6. Базовая архитектура (нужна всегда)
- C4 Context — показать систему в окружении
- C4 Container — показать основные компоненты

---

### PHASE 2: ASSESS — Оценка контекста

Определи контекст проекта:

| Фактор | MVP/Прототип | Продукт | Enterprise |
|--------|--------------|---------|------------|
| Команда | 1-2 человека | 3-7 человек | 8+ человек |
| Срок | Недели | Месяцы | Годы |
| Пользователи | Десятки | Тысячи | Миллионы |
| Требования к документации | Минимум | Средние | Высокие |

**Контекст влияет на глубину:**
- MVP → только критичные артефакты, можно схематично
- Продукт → основные артефакты, средняя детализация
- Enterprise → полный набор, высокая детализация

---

### PHASE 3: RECOMMEND — Формирование рекомендаций

Для каждого артефакта укажи:
- **Нужен / Не нужен / Опционально**
- **Почему** — конкретная причина из анализа
- **Приоритет** — когда делать (сейчас / перед разработкой / по ходу)
- **Уровень детализации** — схематично / средне / детально

---

## Целевая структура вывода

```markdown
# Рекомендации по техническим артефактам

> Проект: [название из Brief]
> Контекст: [MVP / Продукт / Enterprise]
> Дата анализа: [дата]

---

## Сводка

| Артефакт | Статус | Приоритет | Обоснование |
|----------|--------|-----------|-------------|
| C4 Context | ✅ Нужен | Сейчас | [краткое обоснование] |
| C4 Container | ✅ Нужен | Сейчас | [краткое обоснование] |
| ER-диаграмма | ✅/❌/⚠️ | ... | ... |
| Data Dictionary | ✅/❌/⚠️ | ... | ... |
| API контракты | ✅/❌/⚠️ | ... | ... |
| State Machine | ✅/❌/⚠️ | ... | ... |
| Sequence диаграммы | ✅/❌/⚠️ | ... | ... |
| Information Architecture | ✅/❌/⚠️ | ... | ... |
| Wireframes | ✅/❌/⚠️ | ... | ... |

**Легенда:** ✅ Нужен | ❌ Не нужен | ⚠️ Опционально

---

## Детальный анализ

### 1. C4 Context Diagram

**Статус:** ✅ Нужен (всегда)

**Что показать:**
- [Какие внешние системы взаимодействуют]
- [Какие типы пользователей]

**Уровень детализации:** [схематично / средне / детально]

---

### 2. C4 Container Diagram

**Статус:** ✅ Нужен (всегда)

**Что показать:**
- [Основные контейнеры: web app, API, DB, etc.]
- [Как они связаны]

**Уровень детализации:** [схематично / средне / детально]

---

### 3. ER-диаграмма

**Статус:** [✅/❌/⚠️]

**Обоснование:**
- [Какие индикаторы найдены или не найдены]

**Если нужна — ключевые сущности:**
- [Сущность 1]
- [Сущность 2]
- ...

---

### 4. Data Dictionary

**Статус:** [✅/❌/⚠️]

**Обоснование:**
- [Связано с ER-диаграммой, нужно если есть сложные сущности]

---

### 5. API контракты

**Статус:** [✅/❌/⚠️]

**Обоснование:**
- [Какие интеграции найдены]

**Если нужны — типы API:**
- [ ] REST API (OpenAPI)
- [ ] Webhooks (AsyncAPI)
- [ ] GraphQL schema

---

### 6. State Machine диаграммы

**Статус:** [✅/❌/⚠️]

**Обоснование:**
- [Какие сущности со сложным жизненным циклом]

**Если нужны — для каких сущностей:**
- [Сущность 1: состояния]
- [Сущность 2: состояния]

---

### 7. Sequence диаграммы

**Статус:** [✅/❌/⚠️]

**Обоснование:**
- [Какие сложные взаимодействия найдены]

**Если нужны — для каких сценариев:**
- [Сценарий 1]
- [Сценарий 2]

---

### 8. Information Architecture

**Статус:** [✅/❌/⚠️]

**Обоснование:**
- [Есть ли UI, насколько сложный]

---

### 9. Wireframes

**Статус:** [✅/❌/⚠️]

**Обоснование:**
- [Какие экраны критичны для понимания]

**Если нужны — приоритетные экраны:**
- [Экран 1]
- [Экран 2]

---

## Рекомендуемый порядок создания

1. **Сначала** (понимание системы):
   - [ ] C4 Context
   - [ ] C4 Container

2. **Затем** (структура данных):
   - [ ] ER-диаграмма
   - [ ] Data Dictionary

3. **Параллельно** (по мере необходимости):
   - [ ] API контракты — перед интеграциями
   - [ ] State Machine — перед реализацией сущностей с состояниями
   - [ ] Sequence — для сложных сценариев

4. **UI артефакты** (если применимо):
   - [ ] Information Architecture
   - [ ] Wireframes ключевых экранов

---

## Что НЕ нужно

[Список артефактов, которые могут показаться нужными, но не требуются для этого проекта, с объяснением почему]

---

## Открытые вопросы

[Вопросы, которые нужно уточнить для более точных рекомендаций]

```

---

## Важные правила

1. **Не рекомендуй лишнего** — каждый артефакт должен решать конкретную проблему
2. **Учитывай контекст** — MVP не нуждается в enterprise-документации
3. **Объясняй отказы** — если что-то не нужно, скажи почему
4. **Предлагай альтернативы** — иногда вместо формального артефакта достаточно заметки в коде
