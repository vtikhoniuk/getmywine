"""Mock AI service for wine recommendations.

This is a placeholder service that returns pre-defined responses.
It will be replaced with a real LLM integration in the future.
"""
import random
from typing import Optional


class MockAIService:
    """Mock AI service that returns wine-related responses."""

    # Pre-defined response templates for generic requests
    RESPONSES_GENERIC = [
        """Отличный выбор! Для этого случая я бы рекомендовал обратить внимание на:

**Красные вина:**
- Каберне Совиньон — насыщенный вкус с нотами черной смородины
- Мерло — более мягкое, с оттенками сливы и шоколада

**Белые вина:**
- Шардоне — полнотелое, с ванильными нотами
- Совиньон Блан — свежее, с цитрусовыми оттенками

Какой стиль вина вам ближе — более насыщенный или легкий?""",

        """Интересный вопрос! Вот что я могу посоветовать:

При выборе вина важно учитывать:
1. **К блюду** — красное мясо любит танинные красные, рыба — легкие белые
2. **Настроение** — для романтического ужина подойдет игристое или розовое
3. **Сезон** — летом освежающие белые, зимой — согревающие красные

Расскажите подробнее о вашей ситуации, и я подберу идеальное вино!""",

        """Прекрасно, давайте разберёмся!

**Несколько рекомендаций:**
- Если вы новичок — начните с полусухих вин, они универсальны
- Для особого случая — присмотритесь к винам из известных регионов (Бордо, Тоскана, Риоха)
- Для ежедневного ужина — молодые вина текущего урожая

Хотите, расскажу подробнее о каком-то конкретном регионе или сорте?""",
    ]

    # Event-specific response templates
    RESPONSES_BY_EVENT = {
        "dinner_for_two": """Романтический ужин — прекрасный повод для особенного вина!

Вот три варианта для вас:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Элегантная классика**

**Château Margaux, Margaux**
Бордо, Франция · 2018
~$450

Утончённое и сложное вино с нотами чёрной смородины, фиалки и кедра.
_Почему подходит:_ Создаёт атмосферу особого случая, впечатлит вашу половинку.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Романтичное розовое**

**Whispering Angel, Côtes de Provence**
Прованс, Франция · 2023
~$25

Свежее розовое с нотами клубники и белых цветов.
_Почему подходит:_ Лёгкое, романтичное, идеально для начала вечера.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Игристая интрига**

**Franciacorta Brut, Ca' del Bosco**
Ломбардия, Италия
~$45

Итальянский ответ шампанскому — элегантные пузырьки, ноты бриоши.
_Почему подходит:_ Праздничное настроение без пафоса.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Какой стиль вечера планируете — торжественный или уютный?""",

        "friends_gathering": """Отличный план! Для посиделок с друзьями нужно вино, которое понравится всем.

Вот три варианта:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Универсальное красное**

**Catena Malbec, Mendoza**
Аргентина · 2021
~$20

Сочный мальбек с нотами сливы и специй. Не слишком сложное, но интересное.
_Почему подходит:_ Нравится почти всем, легко пьётся, доступная цена.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Освежающее белое**

**Kim Crawford Sauvignon Blanc**
Мальборо, Новая Зеландия · 2023
~$15

Яркий совиньон блан с нотами маракуйи и лайма.
_Почему подходит:_ Свежесть для тех, кто не любит красное.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Весёлые пузырьки**

**Prosecco Superiore, Bisol**
Вальдоббьядене, Италия
~$18

Лёгкое игристое с нотами зелёного яблока и цветов.
_Почему подходит:_ Создаёт праздничное настроение, подходит для аперитива.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Сколько человек ожидается? Могу рассчитать количество бутылок!""",

        "bbq": """Шашлыки и вино — классика! Для мяса на гриле нужны яркие, насыщенные вина.

Вот три варианта:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Идеальная пара к мясу**

**Penfolds Bin 28 Shiraz**
Южная Австралия · 2020
~$30

Мощный шираз с нотами чёрного перца, ежевики и дыма.
_Почему подходит:_ Дымные ноты вина отлично сочетаются с углями.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Аргентинская классика**

**Luigi Bosca Malbec DOC**
Мендоса, Аргентина · 2021
~$25

Плотный мальбек с нотами сливы, какао и ванили.
_Почему подходит:_ Аргентинцы знают толк в мясе — их вино создано для гриля.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Испанский темперамент**

**Cune Crianza, Rioja**
Риоха, Испания · 2019
~$15

Классическая риоха с нотами вишни, ванили и специй.
_Почему подходит:_ Отличное соотношение цены и качества для большой компании.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Какое мясо будете готовить? Могу уточнить рекомендации!""",

        "gift": """Вино в подарок — отличная идея! Важны и вкус, и презентация.

Вот три варианта:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Беспроигрышная классика**

**Opus One**
Напа Вэлли, США · 2019
~$400

Культовый бленд Бордо из Калифорнии. Роскошная бутылка.
_Почему подходит:_ Узнаваемый бренд, впечатлит любого знатока.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Элегантное шампанское**

**Dom Pérignon Vintage**
Шампань, Франция · 2013
~$250

Легендарное шампанское — всегда уместный подарок.
_Почему подходит:_ Символ праздника, красивая подача.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Доступная роскошь**

**Tignanello, Antinori**
Тоскана, Италия · 2020
~$120

Супертосканское вино с историей. Красивая этикетка.
_Почему подходит:_ Статусное вино по разумной цене.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Какой бюджет на подарок и кому дарите?""",
    }

    # Food-specific response templates
    RESPONSES_BY_FOOD = {
        "стейк": """К стейку — классический выбор! Мясо любит танинные красные вина.

Вот три варианта:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Классика жанра**

**Caymus Cabernet Sauvignon**
Напа Вэлли, США · 2021
~$90

Насыщенный каберне с нотами чёрной смородины и дуба.
_Почему подходит:_ Танины смягчают жирность мяса, вино раскрывается с каждым кусочком.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Аргентинский мальбек**

**Catena Alta Malbec**
Мендоса, Аргентина · 2020
~$45

Плотный мальбек с нотами ежевики, фиалки и шоколада.
_Почему подходит:_ Аргентина = мясо, их вина созданы для стейков.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Бордо**

**Château Lynch-Bages, Pauillac**
Бордо, Франция · 2018
~$120

Классический пойяк с нотами кедра, табака и чёрных ягод.
_Почему подходит:_ Структура и элегантность — для особенного стейка.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Какая прожарка стейка? Для rare — более молодые вина, для well done — более выдержанные.""",

        "рыба": """К рыбе — деликатный выбор! Важно не перебить вкус.

Вот три варианта:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Минеральная классика**

**Chablis Premier Cru, William Fèvre**
Бургундия, Франция · 2022
~$45

Чистое шабли с нотами лимона, мела и устричных раковин.
_Почему подходит:_ Минеральность вина подчёркивает свежесть рыбы.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Свежий совиньон**

**Cloudy Bay Sauvignon Blanc**
Мальборо, Новая Зеландия · 2023
~$30

Яркий совиньон с нотами крыжовника и трав.
_Почему подходит:_ Кислотность освежает, травяные ноты дополняют.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Испанское альбариньо**

**Pazo de Señorans Albariño**
Риас Байшас, Испания · 2023
~$25

Ароматное белое с нотами персика и морской соли.
_Почему подходит:_ Создано для морепродуктов — классика Галисии.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Какая рыба — белая, красная, жирная?""",

        "морепродукты": """Морепродукты — это праздник! Нужны свежие, минеральные вина.

Вот три варианта:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**К устрицам**

**Muscadet Sèvre et Maine, Domaine de la Pépière**
Луара, Франция · 2023
~$18

Сухое вино с нотами лимона и морской соли.
_Почему подходит:_ Классическая пара — минеральность + йод.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**К креветкам**

**Vermentino di Sardegna, Argiolas**
Сардиния, Италия · 2023
~$15

Освежающее белое с нотами цитрусов и миндаля.
_Почему подходит:_ Средиземноморский характер для морепродуктов.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**Шампанское**

**Billecart-Salmon Brut Réserve**
Шампань, Франция
~$60

Элегантное шампанское с нотами бриоши и цитрусов.
_Почему подходит:_ Пузырьки очищают нёбо, кислотность балансирует жирность.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Что именно готовите?""",

        "сыр": """Сыр и вино — вечная классика! Но важно учитывать тип сыра.

Вот три варианта для разных сыров:

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**К мягким сырам (бри, камамбер)**

**Sancerre, Domaine Vacheron**
Луара, Франция · 2023
~$35

Элегантный совиньон блан с нотами цитрусов и мела.
_Почему подходит:_ Кислотность режет жирность, свежесть освежает.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**К выдержанным (пармезан, грюйер)**

**Amarone della Valpolicella, Bertani**
Венето, Италия · 2017
~$70

Мощное красное с нотами вишни, шоколада и сухофруктов.
_Почему подходит:_ Интенсивность вина выдерживает насыщенный сыр.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

**К голубым (рокфор, горгонзола)**

**Sauternes, Château Rieussec**
Бордо, Франция · 2019
~$50

Сладкое вино с нотами абрикоса и мёда.
_Почему подходит:_ Классическое сочетание — сладкое + солёное.

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

Какой сыр у вас?""",
    }

    def generate_response(self, user_message: str) -> str:
        """
        Generate a mock AI response.

        Args:
            user_message: The user's message (used for future improvements)

        Returns:
            A wine-related response string
        """
        return random.choice(self.RESPONSES_GENERIC)

    async def generate_response_async(self, user_message: str) -> str:
        """
        Async version of generate_response.

        Args:
            user_message: The user's message

        Returns:
            A wine-related response string
        """
        return self.generate_response(user_message)

    async def generate_response_with_context(
        self,
        user_message: str,
        detected_event: Optional[str] = None,
        detected_food: Optional[str] = None,
    ) -> str:
        """
        Generate response based on detected context.

        Args:
            user_message: The user's message
            detected_event: Detected event type (dinner_for_two, bbq, etc.)
            detected_food: Detected food item (стейк, рыба, etc.)

        Returns:
            Contextual wine recommendation
        """
        # Priority: event > food > generic
        if detected_event and detected_event in self.RESPONSES_BY_EVENT:
            return self.RESPONSES_BY_EVENT[detected_event]

        if detected_food and detected_food in self.RESPONSES_BY_FOOD:
            return self.RESPONSES_BY_FOOD[detected_food]

        # Fallback to generic
        return random.choice(self.RESPONSES_GENERIC)
