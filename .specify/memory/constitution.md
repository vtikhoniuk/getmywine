<!--
SYNC IMPACT REPORT
==================
Изменение версии: 1.0.1 → 2.0.0 (MAJOR: полная переработка по образцу)

Изменённые принципы: Все (новая структура)

Добавленные секции:
- Принципы разработки (4 пункта)
- Принципы продукта (3 пункта)
- Технологический стек
- Coding Standards

Удалённые секции:
- Юридические ограничения (перенесено в Принципы продукта)
- Стандарты разработки (заменено на Coding Standards)
- Управление (убрано, избыточно для MVP)

Шаблоны: Совместимы, обновление не требуется
==================
-->

# Конституция GetMyWine

## Принципы разработки

1. **Clean Architecture** — чёткое разделение слоёв:
   - Routers → Services → Repositories → Models
   - Бизнес-логика изолирована от фреймворка

2. **Database First** — схема БД определяет API:
   - Сначала миграция, потом код
   - Alembic для всех изменений схемы

3. **TDD (Test-Driven Development)** — разработка через тестирование:
   - _Red_: Написание провального теста перед кодом
   - _Green_: Минимальный код для прохождения теста
   - _Refactor_: Улучшение при сохранении тестов

4. **RAG-First** — рекомендации только из каталога:
   - Все ответы AI валидируются через pgvector
   - Нет совпадений → явное сообщение пользователю
   - Галлюцинации = критический баг

## Принципы продукта

1. **18+ и никаких продаж** — сервис только рекомендует:
   - Возрастной барьер до первой рекомендации
   - Нет ссылок на покупку, корзин, оплаты
   - Соответствие 152-ФЗ (данные в РФ)

2. **Образование > конверсия** — помогаем понять вино:
   - Объясняем ПОЧЕМУ рекомендуем
   - «Не знаю» → упрощаем вопрос
   - Без манипуляций и давления

3. **Приватность данных** — пользователь контролирует профиль:
   - Просмотр, экспорт, удаление данных
   - Гостевой режим доступен

## Технологический стек

```
Frontend:
├── HTMX
├── Vanilla JS
└── Jinja2 (SSR)

Backend:
├── Python 3.12+
├── FastAPI
├── SQLAlchemy 2.0
├── Alembic
├── PostgreSQL 16 + pgvector
└── Claude API

Инфраструктура:
├── VPS (systemd + Nginx)
├── Let's Encrypt SSL
└── GitHub (git pull deploy)
```

## Coding Standards

- **Ruff** — линтинг и форматирование Python
- **Commitizen** — conventional commits
- **100% покрытие** критичных путей (auth, chat, RAG)
- **OpenAPI 3.0** — документация API автогенерируется

---

**Версия**: 2.0.0 | **Дата**: 2026-02-02
